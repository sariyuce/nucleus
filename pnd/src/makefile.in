MODE=gcc
DEBUG=no
OPT=yes
FAST=yes

PARALLEL=yes
TYPE=ASYNC

ifeq ($(MODE),gcc)
# ------- LINUX ----------
ccc = gcc
CC        = gcc
CXX        = g++
LD         = g++
CFLAGS     += $(FLAGS) -Wstrict-prototypes
CXXFLAGS   += $(FLAGS) -std=c++14
LDFLAGS    = $(FLAGS) -std=c++14
endif

ifeq ($(MODE),icc)
# ------- LINUX ----------
ccc        = icc
CXX=icpc
CFLAGS     =
CXXFLAGS   =
LDFLAGS    =
LD=icpc
endif


ifeq ($(PARALLEL), yes)
LDFLAGS += -fopenmp
CFLAGS	+= -fopenmp
CXXFLAGS += -fopenmp
endif

ifeq ($(WARN),yes)
FLAGS      = -Wall -W -Wextra
endif

ifeq ($(DEBUG),yes)
CFLAGS    += -g 
CXXFLAGS    += -g 
LDFLAGS   += -g 
endif

ifeq ($(OPT),yes)
CFLAGS    += -O2 -DNDEBUG
CXXFLAGS    += -O2 -DNDEBUG
LDFLAGS   += -DNDEBUG
endif

ifeq ($(FAST), yes)
CFLAGS	+= -D FAST
CXXFLAGS += -D FAST
endif

ifeq ($(TYPE), SYNC)
CFLAGS	+= -D SYNC
CXXFLAGS += -D SYNC
endif

ifeq ($(TYPE), ASYNC)
CFLAGS	+= -D ASYNC
CXXFLAGS += -D ASYNC
endif

ifeq ($(DUMP_K), yes)
CFLAGS	+= -D DUMP_K
CXXFLAGS += -D DUMP_K
endif

ifeq ($(DUMP_Hs), yes)
CFLAGS	+= -D DUMP_Hs
CXXFLAGS += -D DUMP_Hs
endif

LIBS       = -lm

.SUFFIXES:
.SUFFIXES: .o .cpp
.SUFFIXES: .o .c

.c.o: 
	$(ccc) $(CFLAGS) $(INCLUDES) -c $*.c -o $@

.cpp.o: 
	$(CXX) $(CXXFLAGS) $(INCLUDES) -c $*.cpp -o $@
	

  
